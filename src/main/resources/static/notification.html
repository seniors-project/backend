<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Notification Test Page</title>
</head>
<body>
<input type="text" id="id"/>
<button type="button" onclick="login()">로그인</button>
</body>
</html>
<script type="text/javaScript">
    function login() {
        const id = document.getElementById('id').value;

        const eventSource = new EventSource(`/subscribe`);
        eventSource.addEventListener("sse", function (event) {
            let data;
            try {
                data = JSON.parse(event.data);
                // Create a new notification
                const notification = new Notification('Seniors', {
                    body: data.content
                });

                // navigate to a URL when clicked
                notification.addEventListener('click', () => {
                    window.open(data.url, '_blank');
                });

                // Close the notification after 10 seconds
                setTimeout(() => {
                    notification.close();
                }, 10000);
            } catch (error) {
                console.error("Error parsing JSON data:", error);
                return;
            }
        })
    }
</script>